<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>Fragementos tickets</title>
    </head>
    <body>
        <!--1 Filtros de histórico de tickets-->
        <section id="filtros" th:fragment="filtrosHistorico">
            <div class="panel panel-default">
                <div class="panel-body">                    
                    <!-- 2 column grid layout with text inputs for the first and last names -->
                    <form method="POST" th:action="@{/ticket/query1}"                               
                          class="was-validated">
                        <div class="card">                            
                            <div class="card-body">
                                <div class="mb-3">
                                    <label for="fechaRegistro">[[#{solicitud.fecha.registro}]]</label>
                                    <input type="text" class="form-control" 
                                           th:value="${fecha}"
                                           th:name="fecha" 
                                           />
                                </div>                                    
                            </div>
                            <div class="card-footer text-center">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-check"></i>[[#{accion.filtrar}]]
                                </button>
                            </div>
                        </div>
                    </form>
                    <form method="POST" th:action="@{/ticket/query2}"                               
                          class="was-validated">
                        <div class="card">                            
                            <div class="card-body">
                                <div class="mb-3">
                                    <label for="estadoTicket">[[#{solicitud.estado}]]</label>
                                    <input type="text" class="form-control" 
                                           th:value="${estado}"
                                           th:name="estado" 
                                           />
                                </div>

                            </div>
                            <div class="card-footer text-center">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-check"></i>[[#{accion.filtrar}]]
                                </button>
                            </div>
                        </div>
                    </form>
                    <form method="POST" th:action="@{/ticket/query3}"                               
                          class="was-validated">
                        <div class="card">                            
                            <div class="card-body">
                                <div class="mb-3">
                                    <label for="incidencia">[[#{solicitud.tipo.incidente}]]</label>
                                    <input type="text" class="form-control" 
                                           th:value="${incidente}"
                                           th:name="incidente" 
                                           />
                                </div>

                            </div>
                            <div class="card-footer text-center">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-check"></i>[[#{accion.filtrar}]]
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </section>
        <!--2 Listado de tickets-->
        <section id="tabla" th:fragment="listadoHistorico">
            <div class="container">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <!-- 2 column grid layout with text inputs for the first and last names -->
                        <section  id="Tickets">

                            <div class="row">
                                <div class="col-md-11 mb-2">
                                    <div class="card">
                                        <div th:if="${tickets != null and !tickets.empty}">
                                            <table class="table table-striped table-hover">
                                                <thead class="table-dark">
                                                    <tr><th>[[#{solicitud.ticket}]]</th>
                                                        <th>[[#{solicitud.fecha.registro}]]</th>
                                                        <th>[[#{solicitud.tipo.incidente}]]</th>
                                                        <th>[[#{solicitud.estado}]]</th>
                                                        <th>[[#{plantilla.tusuario}]]</th>
                                                        <th>[[#{solicitud.tecnico.registro}]]</th>
                                                        <th></th></tr>
                                                </thead>
                                                <tbody>
                                                    <tr th:each="ticket : ${tickets}">
                                                        <td th:text="${ticket.idTicket}"></td>
                                                        <td th:text="${ticket.fechaRegistroUsuario}"></td>
                                                        <td th:text="${ticket.incidencia.descripcion}"></td>
                                                        <td th:text="${ticket.estado.descripcion}"></td>
                                                        <td th:text="${ticket.usuario.username}"></td>
                                                        <td th:text="${ticket.tecnico.username}"></td>  
                                                        <td> <a th:href="@{/ticket/ver/}+${ticket.idTicket}"
                                                                class="btn btn-success">
                                                                <i class="fas fa-pencil"></i>[[#{accion.ver.ticket}]]</a></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="text-center p-2" th:if="${tickets == null or tickets.empty}">
                                            <span>[[#{lista.vacia}]]</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </section>
        <!--3 Listado de tickets de técnico-->
        <section id="tabla" th:fragment="listadoAsignados">
            <div class="container">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <section  id="Tickets">
                            <div class="container">
                                <div class="row">
                                    <div class="col-md-11 mb-2">
                                        <div class="card">
                                            <div th:if="${tickets != null and !tickets.empty}">
                                                <table class="table table-striped table-hover">
                                                    <thead class="table-dark">
                                                        <tr><th>[[#{solicitud.ticket}]]</th>
                                                            <th>[[#{solicitud.fecha.registro}]]</th>
                                                            <th>[[#{solicitud.tipo.incidente}]]</th>
                                                            <th>[[#{solicitud.estado}]]</th>
                                                            <th>[[#{plantilla.tusuario}]]</th>
                                                            <th>[[#{solicitud.tecnico.registro}]]</th>
                                                            <th></th></tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr th:each="ticket : ${tickets}" th:if="${ticket.tecnico.username} ==  ${#authentication.getName()} and
                                                            ${ticket.estado.estadoTicket} < 4">
                                                            <td>[[${ticket.idTicket}]]</td>
                                                            <td>[[${ticket.fechaRegistroUsuario}]]</td>
                                                            <td>[[${ticket.incidencia.descripcion}]]</td>
                                                            <td>[[${ticket.estado.descripcion}]]</td>
                                                            <td>[[${ticket.usuario.username}]]</td>
                                                            <td>[[${ticket.tecnico.username}]]</td>
                                                            <td> <a th:href="@{/ticket/atencion/}+${ticket.idTicket}"
                                                                    class="btn btn-success">
                                                                    <i class="fas fa-pencil"></i>[[#{accion.atender}]]</a></td></tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div class="text-center p-2" th:if="${tickets == null or tickets.empty}">
                                                <span>[[#{lista.vacia}]]</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </section>

        <!--3 Listado de tickets de técnico-->
        <section id="tabla" th:fragment="listadoHistoricoTecnico">
            <div class="container">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <!--2 column grid layout with text inputs for the first and last names--> 
                        <section  id="Tickets">
                            <div class="container">
                                <div class="row">
                                    <div class="col-md-11 mb-2">
                                        <div class="card">
                                            <div th:if="${tickets != null and !tickets.empty}">
                                                <table class="table table-striped table-hover">
                                                    <thead class="table-dark">
                                                        <tr><th>[[#{solicitud.ticket}]]</th>
                                                            <th>[[#{solicitud.fecha.registro}]]</th>
                                                            <th>[[#{solicitud.tipo.incidente}]]</th>
                                                            <th>[[#{solicitud.estado}]]</th>
                                                            <th>[[#{plantilla.tusuario}]]</th>
                                                            <th>[[#{solicitud.tecnico.registro}]]</th>
                                                            <th></th></tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr th:each="ticket : ${tickets}" th:if="${ticket.tecnico.username} == ${#authentication.getName()}
                                                            and ${ticket.estado.estadoTicket} == 4">
                                                            <td>[[${ticket.idTicket}]]</td>
                                                            <td>[[${ticket.fechaRegistroUsuario}]]</td>
                                                            <td>[[${ticket.incidencia.descripcion}]]</td>
                                                            <td>[[${ticket.estado.descripcion}]]</td>
                                                            <td>[[${ticket.usuario.username}]]</td>
                                                            <td>[[${ticket.tecnico.username}]]</td>
                                                            <td> <a th:href="@{/ticket/ver/}+${ticket.idTicket}"
                                                                    class="btn btn-success">
                                                                    <i class="fas fa-pencil"></i>[[#{accion.ver.ticket}]]</a></td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div class="text-center p-2" th:if="${tickets == null or tickets.empty}">
                                                <span>[[#{lista.vacia}]]</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </section>

        <!--3 Listado de tickets de técnico-->
        <section id="tabla" th:fragment="listadoHistoricoUsuario">
            <div class="container">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <!-- 2 column grid layout with text inputs for the first and last names -->
                        <section  id="Tickets">
                            <div class="container">
                                <div class="row">
                                    <div class="col-md-11 mb-2">
                                        <div class="card">
                                            <div th:if="${tickets != null and !tickets.empty}">
                                                <table class="table table-striped table-hover">
                                                    <thead class="table-dark">
                                                        <tr><th>[[#{solicitud.ticket}]]</th>
                                                            <th>[[#{solicitud.fecha.registro}]]</th>
                                                            <th>[[#{solicitud.tipo.incidente}]]</th>
                                                            <th>[[#{solicitud.estado}]]</th>
                                                            <th>[[#{plantilla.tusuario}]]</th>
                                                            <th>[[#{solicitud.tecnico.registro}]]</th>
                                                            <th></th></tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr th:each="ticket : ${tickets}" th:if="${ticket.usuario.username} == ${#authentication.getName()}
                                                            and ${ticket.estado.estadoTicket} == 4">
                                                            <td>[[${ticket.idTicket}]]</td>
                                                            <td>[[${ticket.fechaRegistroUsuario}]]</td>
                                                            <td>[[${ticket.incidencia.descripcion}]]</td>
                                                            <td>[[${ticket.estado.descripcion}]]</td>
                                                            <td>[[${ticket.usuario.username}]]</td>
                                                            <td>[[${ticket.tecnico.username}]]</td>
                                                            <td> <a th:href="@{/ticket/ver/}+${ticket.idTicket}"
                                                                    class="btn btn-success">
                                                                    <i class="fas fa-pencil"></i>[[#{accion.ver.ticket}]]</a></td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div class="text-center p-2" th:if="${tickets == null or tickets.empty}">
                                                <span>[[#{lista.vacia}]]</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </section>

        <!--3 Listado de tickets de técnico-->
        <section id="tabla" th:fragment="listadoTicketsRegistradosUsuario">
            <div class="container">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <!-- 2 column grid layout with text inputs for the first and last names -->
                        <section  id="Tickets">
                            <div class="container">
                                <div class="row">
                                    <div class="col-md-11 mb-2">
                                        <div class="card">
                                            <div th:if="${tickets != null and !tickets.empty}">
                                                <table class="table table-striped table-hover">
                                                    <thead class="table-dark">
                                                        <tr><th>[[#{solicitud.ticket}]]</th>
                                                            <th>[[#{solicitud.fecha.registro}]]</th>
                                                            <th>[[#{solicitud.tipo.incidente}]]</th>
                                                            <th>[[#{solicitud.estado}]]</th>
                                                            <th>[[#{plantilla.tusuario}]]</th>
                                                            <th>[[#{solicitud.tecnico.registro}]]</th>
                                                            <th></th></tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr th:each="ticket : ${tickets}" th:if="${ticket.usuario.username} == ${#authentication.getName()}
                                                            and ${ticket.estado.estadoTicket} < 4">
                                                            <td>[[${ticket.idTicket}]]</td>
                                                            <td>[[${ticket.fechaRegistroUsuario}]]</td>
                                                            <td>[[${ticket.incidencia.descripcion}]]</td>
                                                            <td>[[${ticket.estado.descripcion}]]</td>
                                                            <td>[[${ticket.usuario.username}]]</td>
                                                            <td>[[${ticket.tecnico.username}]]</td>
                                                            <td> <a th:href="@{/ticket/editar/}+${ticket.idTicket}"
                                                                    class="btn btn-success">
                                                                    <i class="fas fa-pencil"></i>[[#{accion.editar.ticket}]]</a></td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div class="text-center p-2" th:if="${tickets == null or tickets.empty}">
                                                <span>[[#{lista.vacia}]]</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </section>

        <!--Atender tickets-->
        <section id="atenderTickets" th:fragment="atenderTicket">
            <div class="row">
                <div class="col-md-2"></div>
                <div class="col-md-8">
                    <form method="POST"
                          th:action="@{/ticket/guardar}" th:object="${ticket}"
                          class="was-validated"
                          enctype="multipart/form-data">
                        <input type="hidden" name="idTicket" th:field="*{idTicket}"/>
                        <input type="hidden" name="usuario.idUsuario" th:field="*{usuario.idUsuario}"/>
                        <input type="hidden" name="fechaRegistraTecnico" th:field="*{fechaRegistraTecnico}"/>
                        <input type="hidden" name="tecnico.idUsuario" th:field="*{tecnico.idUsuario}"/>
                        <section th:replace="~{UsuarioTickets/fragmentos :: botonesAtencion}"/>
                        <div id=details>
                            <div class="container">
                                <div class="row">
                                    <div class="col">
                                        <div class="card">
                                            <div class="card-header">
                                                <h4>[[#{solicitud.atencion}]]</h4>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="idTicket">[[#{solicitud.atencion.numero}]]</label>
                                                    <input type="text" class="form-control" 
                                                           th:field="*{idTicket}"
                                                           readonly
                                                           disabled="true">
                                                </div>
                                                <div class="mb-3">
                                                    <label for="usuario.username">[[#{solicitud.atencion.usuario}]]</label>
                                                    <input type="text" class="form-control" 
                                                           th:field="*{usuario.username}"
                                                           readonly
                                                           disabled="true">
                                                </div>
                                                <div class="mb-3">
                                                    <label for="estado">[[#{solicitud.estado}]]</label>
                                                    <select th:field="*{estado.estadoTicket}"
                                                            class="form-select" 
                                                            aria-label="Default select example">
                                                        <option th:each="c : ${estadoTickets}" th:value="${c.estadoTicket}" th:text="${c.descripcion}">
                                                        </option>
                                                    </select>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="incidencia">[[#{solicitud.tipo.incidente}]]</label>
                                                    <select th:field="*{incidencia.incidencia}"
                                                            class="form-select" 
                                                            aria-label="Default select example">
                                                        <option th:each="c : ${incidencias}" th:value="${c.incidencia}" th:text="${c.descripcion}">
                                                        </option>
                                                    </select>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="prioridad">[[#{solicitud.prioridad}]]</label>
                                                    <select th:field="*{prioridad.prioridad}"
                                                            class="form-select" 
                                                            aria-label="Default select example">
                                                        <option th:each="c : ${prioridades}" th:value="${c.prioridad}" th:text="${c.descripcion}">
                                                        </option>
                                                    </select>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="titulo">[[#{solicitud.titulo.nombre}]]</label>
                                                    <input type="text" class="form-control" 
                                                           th:field="*{titulo}"
                                                           readonly>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="descripcion">[[#{solicitud.descripcion}]]</label>
                                                    <textarea rows=1
                                                              class="form-control" 
                                                              th:field="*{descripcion}"                                                               
                                                              readonly></textarea>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="comentariosUsuario">[[#{solicitud.comentarios.usuario}]]</label>
                                                    <textarea rows=1
                                                              class="form-control" 
                                                              th:field="*{comentariosUsuario}"                                                               
                                                              readonly></textarea>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="fechaRegistroUsuario">[[#{solicitud.fecha.registro}]]</label>
                                                    <input type="text" class="form-control" 
                                                           th:field="*{fechaRegistroUsuario}"
                                                           readonly>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="comentariosTecnico">[[#{solicitud.comentarios.tecnico}]]</label>
                                                    <textarea rows=1
                                                              class="form-control" 
                                                              th:field="*{comentarioTecnico}"
                                                              required="True"
                                                              ></textarea>
                                                </div>
                                            </div>                                           
                                            <div class="form-outline mb-4">
                                                <!-- Submit button -->
                                                <!--<button type="submit" class="btn btn-primary btn-block mb-2">[[#{accion.actualizar}]]</button>-->
                                            </div> 
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </section>
        <!--botones atención de caso-->
        <section th:fragment="botonesAtencion">
            <div class="container py-4 mb-4 bg-light">
                <div class="row">
                    <div class="col-md-4 d-grid">
                        <a onclick="history.go(-1)" 
                           class="btn btn-primary">
                            <i class="fas fa-arrow-left"></i>[[#{accion.regresar}]]
                        </a>
                    </div>
                    <div class="col-md-4 d-grid">
                        <button type="submit" class="btn btn-success">
                            <i class="fas fa-check"></i>[[#{accion.guardar}]]
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <section th:fragment="botonRegresar">
            <div class="container py-4 mb-4 bg-light">
                <div class="row">
                    <div class="col-md-4 d-grid">
                        <a onclick="history.go(-1)" class="btn btn-primary">
                            <i class="fas fa-arrow-left"></i>[[#{accion.regresar}]]
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!--Editar tickets-->
        <section id="editarTickets" th:fragment="editarTicket">
            <div class="row">
                <div class="col-md-2"></div>
                <div class="col-md-8">
                    <form method="POST"
                          th:action="@{/ticket/guardar}" th:object="${ticket}"
                          class="was-validated"
                          enctype="multipart/form-data">
                        <input type="hidden" name="idTicket" th:field="*{idTicket}"/>
                        <input type="hidden" name="usuario.idUsuario" th:field="*{usuario.idUsuario}"/>
                        <input type="hidden" name="estado.estadoTicket" th:field="*{estado.estadoTicket}"/>
                        <input type="hidden" name="incidencia.incidencia" th:field="*{incidencia.incidencia}"/>
                        <input type="hidden" name="prioridad.prioridad" th:field="*{prioridad.prioridad}"/>
                        <input type="hidden" name="fechaRegistraTecnico" th:field="*{fechaRegistraTecnico}"/>
                        <input type="hidden" name="tecnico.idUsuario" th:field="*{tecnico.idUsuario}"/>
                        <input type="hidden" name="comentarioTecnico" th:field="*{comentarioTecnico}"/>
                        <section th:replace="~{UsuarioTickets/fragmentos :: botonesAtencion}"/>
                        <div id=details>
                            <div class="container">
                                <div class="row">
                                    <div class="col">
                                        <div class="card">
                                            <div class="card-header">
                                                <h4>[[#{accion.editar.ticket}]]</h4>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="idTicket">[[#{solicitud.atencion.numero}]]</label>
                                                    <input type="text" class="form-control" 
                                                           th:field="*{idTicket}"
                                                           readonly
                                                           disabled="true">
                                                </div>
                                                <div class="mb-3">
                                                    <label for="usuario.username">[[#{solicitud.atencion.usuario}]]</label>
                                                    <input type="text" class="form-control" 
                                                           th:field="*{usuario.username}"
                                                           readonly
                                                           disabled="true">
                                                </div>
                                                <div class="mb-3">
                                                    <label for="estado">[[#{solicitud.estado}]]</label>
                                                    <select th:field="*{estado.estadoTicket}"
                                                            class="form-select" 
                                                            aria-label="Default select example" disabled>
                                                        <option th:each="c : ${estadoTickets}" th:value="${c.estadoTicket}" th:text="${c.descripcion}" disabled>
                                                        </option>
                                                    </select>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="incidencia">[[#{solicitud.tipo.incidente}]]</label>
                                                    <select th:field="*{incidencia.incidencia}"
                                                            class="form-select" 
                                                            aria-label="Default select example" disabled>
                                                        <option th:each="c : ${incidencias}" th:value="${c.incidencia}" th:text="${c.descripcion}" disabled>
                                                        </option>
                                                    </select>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="prioridad">[[#{solicitud.prioridad}]]</label>
                                                    <select th:field="*{prioridad.prioridad}"
                                                            class="form-select" 
                                                            aria-label="Default select example" disabled>
                                                        <option th:each="c : ${prioridades}" th:value="${c.prioridad}" th:text="${c.descripcion}" disabled>
                                                        </option>
                                                    </select>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="titulo">[[#{solicitud.titulo.nombre}]]</label>
                                                    <input type="text" class="form-control" 
                                                           th:field="*{titulo}"
                                                           required>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="descripcion">[[#{solicitud.descripcion}]]</label>
                                                    <textarea rows=1
                                                              class="form-control" 
                                                              th:field="*{descripcion}"                                                               
                                                              required></textarea>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="comentariosUsuario">[[#{solicitud.comentarios.usuario}]]</label>
                                                    <textarea rows=1
                                                              class="form-control" 
                                                              th:field="*{comentariosUsuario}"                                                               
                                                              required></textarea>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="fechaRegistroUsuario">[[#{solicitud.fecha.registro}]]</label>
                                                    <input type="text" class="form-control" 
                                                           th:field="*{fechaRegistroUsuario}"
                                                           readonly>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="comentariosTecnico">[[#{solicitud.comentarios.tecnico}]]</label>
                                                    <textarea rows=1
                                                              class="form-control" 
                                                              th:field="*{comentarioTecnico}"
                                                              readonly
                                                              ></textarea>
                                                </div>
                                            </div>                                           
                                            <div class="form-outline mb-4">
                                                <!-- Submit button -->
                                                <!--<button type="submit" class="btn btn-primary btn-block mb-2">[[#{accion.actualizar}]]</button>-->
                                            </div> 
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!--Ver tickets-->
        <section id="verTickets" th:fragment="verTicket">
            <div class="row">
                <div class="col-md-2"></div>
                <div class="col-md-8">
                    <form method="POST"
                          th:action="@{/ticket/guardar}" th:object="${ticket}"
                          class="was-validated"
                          enctype="multipart/form-data">
                        <input type="hidden" name="idTicket" th:field="*{idTicket}"/>
                        <input type="hidden" name="usuario.idUsuario" th:field="*{usuario.idUsuario}"/>
                        <input type="hidden" name="fechaRegistraTecnico" th:field="*{fechaRegistraTecnico}"/>
                        <input type="hidden" name="tecnico.idUsuario" th:field="*{tecnico.idUsuario}"/>
                        <input type="hidden" name="comentarioTecnico" th:field="*{comentarioTecnico}"/>
                        <section th:replace="~{UsuarioTickets/fragmentos :: botonRegresar}"/>
                        <div id=details>
                            <div class="container">
                                <div class="row">
                                    <div class="col">
                                        <div class="card">
                                            <div class="card-header">
                                                <h4>[[#{accion.ver.ticket}]]</h4>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="idTicket">[[#{solicitud.atencion.numero}]]</label>
                                                    <input type="text" class="form-control" 
                                                           th:field="*{idTicket}"
                                                           readonly
                                                           disabled="true">
                                                </div>
                                                <div class="mb-3">
                                                    <label for="usuario.username">[[#{solicitud.atencion.usuario}]]</label>
                                                    <input type="text" class="form-control" 
                                                           th:field="*{usuario.username}"
                                                           readonly
                                                           disabled="true">
                                                </div>
                                                <div class="mb-3">
                                                    <label for="estado">[[#{solicitud.estado}]]</label>
                                                    <select th:field="*{estado.estadoTicket}"
                                                            class="form-select" 
                                                            aria-label="Default select example" disabled>
                                                        <option th:each="c : ${estadoTickets}" th:value="${c.estadoTicket}" th:text="${c.descripcion}" disabled>
                                                        </option>
                                                    </select>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="incidencia">[[#{solicitud.tipo.incidente}]]</label>
                                                    <select th:field="*{incidencia.incidencia}"
                                                            class="form-select" 
                                                            aria-label="Default select example" disabled>
                                                        <option th:each="c : ${incidencias}" th:value="${c.incidencia}" th:text="${c.descripcion}" disabled>
                                                        </option>
                                                    </select>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="prioridad">[[#{solicitud.prioridad}]]</label>
                                                    <select th:field="*{prioridad.prioridad}"
                                                            class="form-select" 
                                                            aria-label="Default select example" disabled>
                                                        <option th:each="c : ${prioridades}" th:value="${c.prioridad}" th:text="${c.descripcion}" disabled>
                                                        </option>
                                                    </select>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="titulo">[[#{solicitud.titulo.nombre}]]</label>
                                                    <input type="text" class="form-control" 
                                                           th:field="*{titulo}"
                                                           disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="descripcion">[[#{solicitud.descripcion}]]</label>
                                                    <textarea rows=1
                                                              class="form-control" 
                                                              th:field="*{descripcion}"                                                               
                                                              disabled></textarea>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="comentariosUsuario">[[#{solicitud.comentarios.usuario}]]</label>
                                                    <textarea rows=1
                                                              class="form-control" 
                                                              th:field="*{comentariosUsuario}"                                                               
                                                              disabled></textarea>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="fechaRegistroUsuario">[[#{solicitud.fecha.registro}]]</label>
                                                    <input type="text" class="form-control" 
                                                           th:field="*{fechaRegistroUsuario}"
                                                           disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="comentariosTecnico">[[#{solicitud.comentarios.tecnico}]]</label>
                                                    <textarea rows=1
                                                              class="form-control" 
                                                              th:field="*{comentarioTecnico}"
                                                              disabled
                                                              ></textarea>
                                                </div>
                                            </div>                                           
                                            <div class="form-outline mb-4">
                                            </div> 
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!--Atender tickets-->
        <section id="asignarTecnicos" th:fragment="asignarTecnico">
            <div class="row">
                <div class="col-md-2"></div>
                <div class="col-md-8">
                    <form method="POST"
                          th:action="@{/ticket/guardar}" th:object="${ticket}"
                          class="was-validated"
                          enctype="multipart/form-data">
                        <input type="hidden" name="idTicket" th:field="*{idTicket}"/>
                        <input type="hidden" name="usuario.idUsuario" th:field="*{usuario.idUsuario}"/>
                        <input type="hidden" name="fechaRegistraTecnico" th:field="*{fechaRegistraTecnico}"/>
                        <input type="hidden" name="comentarioTecnico" th:field="*{comentarioTecnico}"/>
                        <input type="hidden" name="estado.estadoTicket" th:field="*{estado.estadoTicket}"/>
                        <section th:replace="~{UsuarioTickets/fragmentos :: botonesAtencion}"/>
                        <div id=details>
                            <div class="container">
                                <div class="row">
                                    <div class="col">
                                        <div class="card">
                                            <div class="card-header">
                                                <h4>[[#{solicitud.atencion}]]</h4>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="idTicket">[[#{solicitud.atencion.numero}]]</label>
                                                    <input type="text" class="form-control" 
                                                           th:field="*{idTicket}"
                                                           readonly
                                                           disabled="true">
                                                </div>
                                                <div class="mb-3">
                                                    <label for="usuario.username">[[#{solicitud.atencion.usuario}]]</label>
                                                    <input type="text" class="form-control" 
                                                           th:field="*{usuario.username}"
                                                           readonly
                                                           disabled="true">
                                                </div>                                                
                                                <div class="mb-3">
                                                    <label for="titulo">[[#{solicitud.titulo.nombre}]]</label>
                                                    <input type="text" class="form-control" 
                                                           th:field="*{titulo}"
                                                           readonly>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="descripcion">[[#{solicitud.descripcion}]]</label>
                                                    <textarea rows=1
                                                              class="form-control" 
                                                              th:field="*{descripcion}"                                                               
                                                              readonly></textarea>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="comentariosUsuario">[[#{solicitud.comentarios.usuario}]]</label>
                                                    <textarea rows=1
                                                              class="form-control" 
                                                              th:field="*{comentariosUsuario}"                                                               
                                                              readonly></textarea>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="fechaRegistroUsuario">[[#{solicitud.fecha.registro}]]</label>
                                                    <input type="text" class="form-control" 
                                                           th:field="*{fechaRegistroUsuario}"
                                                           readonly>
                                                </div>
<!--                                                <div class="mb-3">
                                                    <label for="estado">[[#{solicitud.estado}]]</label>
                                                    <select th:field="*{estado.estadoTicket}"
                                                            class="form-select" 
                                                            aria-label="Default select example">
                                                        <option th:each="c : ${estadoTickets}" th:value="${c.estadoTicket}" th:text="${c.descripcion}">
                                                        </option>
                                                    </select>
                                                </div>-->
                                                <div class="mb-3">
                                                    <label for="incidencia">[[#{solicitud.tipo.incidente}]]</label>
                                                    <select th:field="*{incidencia.incidencia}"
                                                            class="form-select" 
                                                            aria-label="Default select example">
                                                        <option th:each="c : ${incidencias}" th:value="${c.incidencia}" th:text="${c.descripcion}">
                                                        </option>
                                                    </select>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="prioridad">[[#{solicitud.prioridad}]]</label>
                                                    <select th:field="*{prioridad.prioridad}"
                                                            class="form-select" 
                                                            aria-label="Default select example">
                                                        <option th:each="c : ${prioridades}" th:value="${c.prioridad}" th:text="${c.descripcion}">
                                                        </option>
                                                    </select>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="tecnico">[[#{solicitud.tecnico.registro}]]</label>
                                                    <select th:field="*{tecnico.idUsuario}"
                                                            class="form-select" 
                                                            aria-label="Default select example">
                                                        <option th:each="c : ${tecnicos}" th:value="${c.idUsuario}" th:text="${c.username}" th:if="${c.rol.rol} > 1">
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>                                           
                                            <div class="form-outline mb-4">
                                                <!-- Submit button -->
                                                <!--<button type="submit" class="btn btn-primary btn-block mb-2">[[#{accion.actualizar}]]</button>-->
                                            </div> 
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        
        <!--3 Listado de tickets de técnico-->
        <section id="tabla" th:fragment="listadoAsignarTecnico">
            <div class="container">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <!-- 2 column grid layout with text inputs for the first and last names -->
                        <section  id="Tickets">
                            <div class="container">
                                <div class="row">
                                    <div class="col-md-11 mb-2">
                                        <div class="card">
                                            <div th:if="${tickets != null and !tickets.empty}">
                                                <table class="table table-striped table-hover">
                                                    <thead class="table-dark">
                                                        <tr><th>[[#{solicitud.ticket}]]</th>
                                                            <th>[[#{solicitud.fecha.registro}]]</th>
                                                            <th>[[#{solicitud.tipo.incidente}]]</th>
                                                            <th>[[#{solicitud.estado}]]</th>
                                                            <th>[[#{plantilla.tusuario}]]</th>
                                                            <th>[[#{solicitud.tecnico.registro}]]</th>
                                                            <th></th></tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr th:each="ticket : ${tickets}" th:if="${ticket.estado.estadoTicket} == 1">
                                                            <td>[[${ticket.idTicket}]]</td>
                                                            <td>[[${ticket.fechaRegistroUsuario}]]</td>
                                                            <td>[[${ticket.incidencia.descripcion}]]</td>
                                                            <td>[[${ticket.estado.descripcion}]]</td>
                                                            <td>[[${ticket.usuario.username}]]</td>
                                                            <td>[[${ticket.tecnico.username}]]</td>
                                                            <td> <a th:href="@{/ticket/listado/solicitudesRegistradas/asignar/}+${ticket.idTicket}"
                                                                    class="btn btn-success">
                                                                    <i class="fas fa-pencil"></i>[[#{solicitud.asignar.tecnico.prioridad}]]</a></td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div class="text-center p-2" th:if="${tickets == null or tickets.empty}">
                                                <span>[[#{lista.vacia}]]</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </section>
    </body>
</html>
